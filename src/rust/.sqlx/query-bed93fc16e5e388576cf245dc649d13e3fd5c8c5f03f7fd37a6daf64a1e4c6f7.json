{
  "db_name": "PostgreSQL",
  "query": "\n            UPDATE aggregator.user_history\n            SET\n                remaining_size = remaining_size - $1,\n                total_filled = total_filled + $1,\n                order_status = CASE remaining_size - $1\n                    WHEN 0 THEN CASE order_status\n                        WHEN 'cancelled' THEN order_status\n                        ELSE 'closed'\n                    END\n                    ELSE CASE order_type\n                        WHEN 'swap' THEN 'closed'\n                        ELSE order_status\n                    END\n                END,\n                last_updated_at = $4\n            WHERE order_id = $2 AND market_id = $3\n            RETURNING order_status as \"order_status: OrderStatus\"\n        ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "order_status: OrderStatus",
        "type_info": {
          "Custom": {
            "name": "order_status",
            "kind": {
              "Enum": [
                "open",
                "closed",
                "cancelled"
              ]
            }
          }
        }
      }
    ],
    "parameters": {
      "Left": [
        "Numeric",
        "Numeric",
        "Numeric",
        "Timestamptz"
      ]
    },
    "nullable": [
      false
    ]
  },
  "hash": "bed93fc16e5e388576cf245dc649d13e3fd5c8c5f03f7fd37a6daf64a1e4c6f7"
}
