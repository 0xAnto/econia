{
  "db_name": "PostgreSQL",
  "query": "\n        UPDATE aggregator.user_history\n        SET\n            remaining_size = remaining_size - $1,\n            total_filled = total_filled + $1,\n            order_status = CASE order_status\n                WHEN 'cancelled' THEN order_status\n                ELSE CASE remaining_size - $1\n                    WHEN 0 THEN 'closed'\n                    ELSE order_status\n                END\n            END,\n            last_updated_at = $4\n        WHERE order_id = $2 AND market_id = $3\n        ",
  "describe": {
    "columns": [],
    "parameters": {
      "Left": [
        "Numeric",
        "Numeric",
        "Numeric",
        "Timestamptz"
      ]
    },
    "nullable": []
  },
  "hash": "9ef7e9da5d5996ddb0baaaaa6d4b14a33b1c8f435666f5f5f86d97acb311db42"
}
